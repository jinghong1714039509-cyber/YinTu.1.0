<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}åŒ»ç–—æ•°æ®å¹³å°{% endblock %}</title>
    
    <link href="/static/vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/static/vendors/nprogress/nprogress.css" rel="stylesheet">
    <link href="/static/build/css/custom.min.css" rel="stylesheet">
    
    <style>
        /* è¾…åŠ©æ ·å¼ï¼š
           å³ä½¿ JS åŠ è½½æˆåŠŸï¼Œæœ‰æ—¶ overflow:hidden ä¹Ÿä¼šå¯¼è‡´èœå•æ˜¾ç¤ºä¸å…¨ã€‚
           è¿™é‡Œçš„æ ·å¼ä½œä¸ºåŒé‡ä¿é™©ã€‚
        */
        .nav-md .container.body .col-md-3.left_col { min-height: 100%; }
        .right_col { min-height: 100vh !important; background-color: #F7F7F7 !important; }
        .main_container { background-color: #2A3F54; }
        
        /* ä¿®å¤é¡¶éƒ¨å¯¼èˆªæ å¯èƒ½å­˜åœ¨çš„é®æŒ¡é—®é¢˜ */
        .top_nav .nav_menu { overflow: visible !important; }
        .navbar-nav > li { position: relative !important; }
        
        /* ä¸‹æ‹‰èœå•å®šä½ä¿®æ­£ 
           Bootstrap åŸç”Ÿä¸‹æ‹‰èœå•éœ€è¦ç»å¯¹å®šä½ï¼Œè¿™é‡Œå¼ºåˆ¶å¯¹é½
        */
        .navbar-right .dropdown-menu {
            position: absolute !important; 
            top: 100% !important; 
            right: 0 !important; 
            left: auto !important;
            z-index: 99999 !important; 
            margin-top: 2px; 
            background-color: #fff;
            border: 1px solid #d9d9d9; 
            box-shadow: 0 6px 12px rgba(0,0,0,.175);
            /* æ³¨æ„ï¼šä¸è¦åŠ  display: blockï¼Œè®© Bootstrap.js æ§åˆ¶æ˜¾ç¤º/éšè— */
        }
        
        .user-profile { cursor: pointer; }
        
        /* ä¼˜åŒ–é¢æ¿æ ·å¼ï¼Œä¿æŒä¸€è‡´æ€§ */
        .x_panel {
            border: none !important; border-radius: 8px !important; background-color: #fff !important;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05) !important; margin-bottom: 20px; padding: 20px !important;
        }
        .x_title { border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
        footer { background: #F7F7F7 !important; color: #999; padding: 15px 20px; border-top: 1px solid #e7e7e7; }
    </style>
    {% block css %}{% endblock %}
</head>

<body class="nav-md">
    <div class="container body">
        <div class="main_container">
            <div class="col-md-3 left_col">
                <div class="left_col scroll-view">
                    <div class="navbar nav_title" style="border: 0;">
                        <a href="/" class="site_title"><i class="fa fa-heartbeat"></i> <span>YinTu åŒ»ç–—</span></a>
                    </div>
                    <div class="clearfix"></div>
                    <br />
                    
                    <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                        
                        {% if user.is_superuser %}
                        <div class="menu_section">
                            <h3>ğŸ›¡ï¸ è¶…çº§ç®¡ç†å‘˜</h3>
                            <ul class="nav side-menu">
                                <li><a href="{% url 'users:admin_dashboard' %}"><i class="fa fa-dashboard"></i> ç®¡ç†é¢æ¿</a></li>
                                <li><a href="{% url 'users:manage_list' %}"><i class="fa fa-users"></i> è´¦å·ä¸æƒé™ç®¡ç†</a></li>
                                <li><a href="{% url 'users:log_list' %}"><i class="fa fa-history"></i> æ“ä½œæ—¥å¿—</a></li>
                            </ul>
                        </div>
                        {% endif %}

                        {% if user.role == 'hospital' or user.is_superuser %}
                        <div class="menu_section">
                            <h3>ğŸ¥ åŒ»é™¢</h3>
                            <ul class="nav side-menu">
                                <li><a href="{% url 'hospital:add' %}"><i class="fa fa-plus-circle"></i> æ–°å»ºç—…ä¾‹ä»»åŠ¡</a></li>
                                <li><a href="{% url 'hospital:index' %}"><i class="fa fa-list-ul"></i> ä»»åŠ¡çŠ¶æ€åˆ—è¡¨</a></li>
                            </ul>
                        </div>
                        {% endif %}

                        {% if user.role == 'labeler' or user.is_superuser %}
                        <div class="menu_section">
                            <h3>ğŸ·ï¸ æ ‡æ³¨</h3>
                            <ul class="nav side-menu">
                                <li><a href="{% url 'labeler:dashboard' %}"><i class="fa fa-folder-open"></i> ä»»åŠ¡å¤§å…</a></li>
                            </ul>
                        </div>
                        {% endif %}
                        
                    </div>
                </div>
            </div>

            <div class="top_nav">
                <div class="nav_menu">
                    <nav>
                        <div class="nav toggle">
                            <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                        </div>
                        <div class="nav toggle" style="width: auto; padding-left: 15px;">
                            <a href="javascript:void(0);" onclick="window.history.back();" style="font-size: 16px;">
                                <i class="fa fa-arrow-left"></i> è¿”å›
                            </a>
                        </div>

                        <ul class="nav navbar-nav navbar-right">
                            <li class="">
                                <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                    <img src="{% if user.avatar %}/media/{{ user.avatar }}{% else %}/static/images/user.png{% endif %}" alt="">
                                    {% if user.is_authenticated %}
                                        {{ user.username }}
                                        <span class=" fa fa-angle-down"></span>
                                    {% else %}
                                        æœªç™»å½•
                                    {% endif %}
                                </a>
                                
                                <ul class="dropdown-menu dropdown-usermenu pull-right">
                                    <li>
                                        <a href="javascript:;">
                                            <span><i class="fa fa-question-circle pull-right"></i> å¸®åŠ©æ–‡æ¡£</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'users:change_password' %}">
                                            <span><i class="fa fa-key pull-right"></i> ä¿®æ”¹å¯†ç </span>
                                        </a>
                                    </li>
                                    <li class="divider"></li>
                                    <li>
                                        <a href="{% url 'users:logout' %}">
                                            <i class="fa fa-sign-out pull-right"></i> 
                                            <strong>ğŸ”„ åˆ‡æ¢è´¦å· / é€€å‡º</strong>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>

            {% block content %}{% endblock %}

            <footer>
                <div class="pull-right">YinTu System v1.0</div>
                <div class="clearfix"></div>
            </footer>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
    
    <script src="/static/build/js/custom.min.js"></script>
    
    {% block js %}{% endblock %}

    <script>
    $(document).ready(function() {
        // ç§»é™¤æ‰€æœ‰æ‰‹åŠ¨å†²çªä»£ç ï¼Œå®Œå…¨ä¾èµ– Bootstrap åŸç”Ÿè¡Œä¸ºã€‚
        // ä»…ä¿ç•™é˜²æ­¢è¯¯è§¦å…³é—­çš„é€»è¾‘ï¼ˆå¯é€‰ï¼‰
        $('.dropdown-menu').on('click', function(e){
            e.stopPropagation();
        });
    });
    </script>
</body>
</html>