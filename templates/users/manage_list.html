{% extends "base_site.html" %}
{% block title %}ç”¨æˆ·ä¸æƒé™ç®¡ç†{% endblock %}

{% block content %}
<div class="right_col" role="main">
  <div class="x_panel">
    <div class="x_title">
      <h2>ğŸ‘¥ ç”¨æˆ·è´¦æˆ·ç®¡ç† <small>è¶…çº§ç®¡ç†å‘˜åå°</small></h2>
      <div class="clearfix"></div>
    </div>
    <div class="x_content">
      <div class="table-responsive">
        <table class="table table-striped jambo_table bulk_action">
          <thead>
            <tr class="headings">
              <th class="column-title">ID </th>
              <th class="column-title">ç”¨æˆ·å </th>
              <th class="column-title">è§’è‰² & ç§‘å®¤ </th>
              <th class="column-title">è”ç³»æ–¹å¼ </th>
              <th class="column-title">æ³¨å†Œæ—¶é—´ </th>
              <th class="column-title text-right">ç®¡ç†æ“ä½œ </th>
            </tr>
          </thead>

          <tbody>
            {% for u in users %}
            <tr class="even pointer">
              <td class="a-center ">{{ u.id }}</td>
              <td>
                  <b style="font-size: 14px;">{{ u.username }}</b>
                  {% if u.is_superuser %}
                      <span class="badge bg-red">è¶…çº§ç®¡ç†å‘˜</span>
                  {% endif %}
              </td>
              <td>
                  {% if u.role == 'hospital' %}
                      <span class="label label-primary">ğŸ¥ åŒ»ç”Ÿ</span>
                  {% elif u.role == 'labeler' %}
                      <span class="label label-success">âœï¸ æ ‡æ³¨å‘˜</span>
                  {% endif %}
                  
                  {% if u.department %}
                      <small style="color:#777; margin-left:5px;">({{ u.department }})</small>
                  {% endif %}
              </td>
              <td>
                  {{ u.phone|default:"-" }} <br>
                  <small class="text-muted">{{ u.email }}</small>
              </td>
              <td>{{ u.date_joined|date:"Y-m-d H:i" }}</td>
              
              <td class="text-right">
                {% if not u.is_superuser %}
                    <a href="{% url 'users:user_reset' u.id %}" 
                       class="btn btn-warning btn-sm" 
                       onclick="return confirm('âš ï¸ ç¡®å®šè¦é‡ç½®å¯†ç å—ï¼Ÿ\né‡ç½®åå¯†ç å°†å˜ä¸ºï¼š123456')">
                      <i class="fa fa-refresh"></i> é‡ç½®å¯†ç 
                    </a>
                    
                    <a href="{% url 'users:user_delete' u.id %}" 
                       class="btn btn-danger btn-sm" 
                       onclick="return confirm('â›” é«˜å±æ“ä½œ\nç¡®å®šè¦æ°¸ä¹…åˆ é™¤ç”¨æˆ· [{{ u.username }}] å—ï¼Ÿ\næ­¤æ“ä½œä¸å¯æ¢å¤ï¼')">
                      <i class="fa fa-trash"></i> åˆ é™¤è´¦å·
                    </a>
                {% else %}
                    <button class="btn btn-default btn-sm" disabled><i class="fa fa-shield"></i> ç³»ç»Ÿä¿æŠ¤</button>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      
      <div class="alert alert-info" style="margin-top: 20px;">
          <strong><i class="fa fa-info-circle"></i> ç®¡ç†å‘˜æç¤ºï¼š</strong> 
          å‡ºäºå®‰å…¨åŠ å¯†è§„åˆ™ï¼Œæ‚¨æ— æ³•ç›´æ¥æŸ¥çœ‹ç”¨æˆ·çš„åŸå§‹å¯†ç ã€‚å¦‚ç”¨æˆ·å¿˜è®°å¯†ç ï¼Œè¯·ç‚¹å‡» <b>â€œé‡ç½®å¯†ç â€</b> å°†å…¶æ¢å¤ä¸ºé»˜è®¤å¯†ç  <code>123456</code>ï¼Œå¹¶é€šçŸ¥ç”¨æˆ·ç™»å½•åè‡ªè¡Œä¿®æ”¹ã€‚
      </div>
    </div>
  </div>
</div>
{% endblock %}