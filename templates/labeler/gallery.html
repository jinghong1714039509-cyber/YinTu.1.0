{% extends "base_site.html" %}
{% block title %}样本详情{% endblock %}
{% block content %}
<div class="right_col" role="main">
  <div class="page-title">
    <div class="title_left"><h3>任务: {{ task.name }}</h3></div>
    <div class="title_right">
      <div class="pull-right">
        <a href="{% url 'labeler:download' task.id %}" class="btn btn-success" target="_blank">
          <i class="fa fa-download"></i> 下载图片包 (ZIP)
        </a>
        <button onclick="$('#uploadModal').show()" class="btn btn-warning">
          <i class="fa fa-upload"></i> 上传标注结果
        </button>
      </div>
    </div>
  </div>

  <div class="clearfix"></div>

  <div class="row">
    <div class="col-md-12">
      <div class="x_panel">
        <div class="x_content">
          {% for sample in samples %}
          <div class="col-md-55">
            <div class="thumbnail">
              <div class="image view view-first">
                <img style="width: 100%; display: block;" src="/media/{{ sample.file_path }}" alt="image" />
              </div>
              <div class="caption">
                <p>{{ sample.original_name }}</p>
                {% if sample.is_labeled %}
                <span class="label label-success">已标注</span>
                {% endif %}
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<div id="uploadModal" style="display:none; position:fixed; top:20%; left:30%; width:40%; background:#fff; padding:20px; border:2px solid #ccc; z-index:9999;">
    <h4>上传标注结果 (ZIP)</h4>
    <form action="{% url 'labeler:upload' task.id %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="annotation_file" required class="form-control" style="margin:15px 0;">
        <button type="submit" class="btn btn-primary">提交</button>
        <button type="button" onclick="$('#uploadModal').hide()" class="btn btn-default">取消</button>
    </form>
</div>
{% endblock %}